<div class="vinyl-show-v1">
  <div class="main-content">
    <div class="cover-section">
      <div class="cover-frame">
        <% if @vinyl.image.present? %>
          <%= image_tag @vinyl.image, alt: @vinyl.name, class: "cover-img" %>
        <% else %>
          <div class="cover-img default">ðŸŽµ</div>
        <% end %>
        <div class="vinyl-disc"></div>
      </div>
    </div>

    <div class="info-section">
      <div class="breadcrumb">
        <%= link_to "Collection", collection_users_path %> /
        <% if @vinyl.genres.any? %>
          <%= @vinyl.genres.map(&:name).join(", ") %> /
        <% end %>
        <%= @vinyl.name %>
      </div>

      <% if @vinyl.genres.any? %>
        <span class="genre-badge"><%= @vinyl.genres.map(&:name).join(", ") %></span>
      <% end %>

      <h1 class="album-title"><%= @vinyl.name %></h1>
      <p class="artist-name"><%= @vinyl.artists.map(&:name).join(", ") %></p>

      <div class="meta-grid">
        <div class="meta-item">
          <div class="meta-value"><%= @vinyl.release_date || "N/A" %></div>
          <div class="meta-label">Year</div>
        </div>
        <div class="meta-item">
          <div class="meta-value"><%= @vinyl.price.present? ? "$#{@vinyl.price}" : "N/A" %></div>
          <div class="meta-label">Price</div>
        </div>
        <div class="meta-item">
          <div class="meta-value"><%= @vinyl.genres.any? ? @vinyl.genres.map(&:name).join(", ") : "N/A" %></div>
          <div class="meta-label">Genre</div>
        </div>
      </div>

      <div class="action-buttons">
        <% if @in_collection %>
          <%= button_to "Remove from Collection", match_path(@collection_match), method: :delete, class: "btn-add", data: { confirm: "Are you sure?" } %>
        <% else %>
          <%= button_to matches_path(vinyl_id: @vinyl.id, category: "collection"), method: :post, class: "btn-add" do %>
            <span>+</span> Add to Collection
          <% end %>
        <% end %>

        <% if @in_wishlist %>
          <%= button_to "â™¡", match_path(@wishlist_match), method: :delete, class: "btn-wishlist", data: { confirm: "Are you sure?" } %>
        <% else %>
          <% unless @in_collection %>
            <%= button_to matches_path(vinyl_id: @vinyl.id, category: "wishlist"), method: :post, class: "btn-wishlist" do %>
              â™¡
            <% end %>
          <% end %>
        <% end %>
      </div>

      <button class="btn-playlist">
        <span class="icon">â™«</span>
        Add to Playlist
      </button>

      <% if @vinyl.songs.present? %>
        <div class="tracklist">
          <h3>Tracklist</h3>
          <% @vinyl.parsed_songs.each_with_index do |song, index| %>
            <div class="track">
              <span class="track-num"><%= (index + 1).to_s.rjust(2, '0') %></span>
              <span class="track-title"><%= song %></span>
            </div>
          <% end %>
        </div>
      <% end %>
    </div>
  </div>
</div>
