<div class="container">
  <!-- Header avec H1 et bandeau sur la mÃªme ligne -->
  <div class="header-section">
    <h1>Your collection is worth <%=  @match.total_value(@collections) %> $</h1>

    <% if @playlists.any? %>
      <div class="playlists-banner"
           data-controller="playlist-slider"
           data-playlist-slider-items-per-page-value="3">

        <button class="playlist-nav-btn prev-btn"
                data-playlist-slider-target="prevBtn"
                data-action="click->playlist-slider#previous">
          <span>â€¹</span>
        </button>

        <div class="playlists-slider-wrapper">
          <div class="playlists-slider" data-playlist-slider-target="slider">
            <% @playlists.each do |playlist| %>
              <%= link_to playlist_path(playlist),
                  class: "playlist-pill #{playlist.id == @current_playlist_id ? 'active' : ''}" do %>
                <span class="playlist-icon">ðŸŽµ</span>
                <span class="playlist-name"><%= playlist.name %></span>
                <span class="playlist-count">
                  <%= @playlist_vinyl_counts[playlist.id] || 0 %>
                </span>
              <% end %>
            <% end %>
          </div>
        </div>

        <button class="playlist-nav-btn next-btn"
                data-playlist-slider-target="nextBtn"
                data-action="click->playlist-slider#next">
          <span>â€º</span>
        </button>
      </div>
    <% end %>
  </div>

  <!-- Grille de vinyles -->
  <div class="cards-container">
    <% @collections.each_with_index do |collection| %>
      <div class="vinyl-card">
        <div class="vinyl-flip-container">
          <!-- Face avant (image du vinyle) -->
          <div class="vinyl-face vinyl-front">
            <div class="vinyl-image" style="background-image: url('<%= collection.vinyl.image %>');"></div>
          </div>

          <!-- Face arriÃ¨re (informations) -->
          <div class="vinyl-face vinyl-back">
            <div class="vinyl-info">
              <h4><%= collection.vinyl.name %></h4>

              <% collection.vinyl.artists.each do |artist| %>
                <p class="artist-name">by: <%= artist.name %></p>
              <% end %>

              <% if collection.vinyl.songs.present? %>
                <div class="tracklist">
                  <h5>Tracklist:</h5>
                  <ul>
                    <% collection.vinyl.parsed_songs.each do |song| %>
                      <li><%= song %></li>
                    <% end %>
                  </ul>
                </div>
              <% end %>

              <% if collection.vinyl.price.present? %>
                <div class="vinyl-price">
                  <h5>Value: <%= collection.vinyl.price %>$</h5>
                </div>
              <% end %>

              <%= link_to "Voir dÃ©tails", vinyl_path(collection.vinyl), class: "details-btn" %>
            </div>
          </div>
        </div>
      </div>
    <% end %>
  </div>

</div>
